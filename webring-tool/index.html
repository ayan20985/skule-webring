<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webring Element Generator | SKULE Website Phone Book</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/webring-tool.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <meta name="description" content="A tool to generate webring elements for the SKULE Website Phone Book.">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <canvas id="background-canvas"></canvas>
    <header>
        <div class="theme-toggle">
            <button id="theme-toggle-btn" aria-label="Toggle dark/light mode">
                <span class="theme-icon">◐</span>
            </button>
            <button id="bg-toggle-btn" aria-label="Toggle pixel background" class="bg-toggle-off">
                <span class="bg-icon">◱</span>
            </button>
        </div>
        <h1>Webring Element Generator</h1>
        <p class="subtitle">Create customized webring elements for your SKULE Website Phone Book</p>
        <div class="back-link">
            <a href="../index.html">← Back to SKULE Website Phone Book</a>
        </div>
    </header>

    <main>
        <section class="about">
            <p>
                This tool helps you generate webring elements for the <strong>SKULE Website Phone Book</strong>.
                Customize your webring element and get the code in HTML, JSX, TSX, or PHP format to add to your website.
            </p>
        </section>

        <section class="instructions">
            <h2>How to Use This Tool</h2>
            <ol>
                <li><strong>Customize your webring element</strong> using the options on the left</li>
                <li><strong>Generate the code</strong> by clicking the "Generate Code" button</li>
                <li><strong>Copy the code</strong> from the code editor</li>
                <li><strong>Add the code to your website</strong> in your footer, sidebar, or another visible location</li>
                <li><strong>Replace 'your-website.com'</strong> in the code with your actual website URL</li>
                <li><strong>Join the webring</strong> by following the <a href="https://github.com/ayan20985/webring#joining-the-webring" target="_blank">instructions on GitHub</a></li>
            </ol>
            <div class="note">
                <strong>Note:</strong> Your website must include the webring element to be eligible for joining the SKULE Website Phone Book.
            </div>
        </section>

        <div class="tool-container">
            <section class="customization-panel">
                <h2>Customize Your Webring Element</h2>

                <div class="option-group">
                    <h3>Format</h3>
                    <div class="radio-group">
                        <input type="radio" id="format-html" name="format" value="html" checked>
                        <label for="format-html">HTML</label>

                        <input type="radio" id="format-jsx" name="format" value="jsx">
                        <label for="format-jsx">JSX (React)</label>

                        <input type="radio" id="format-tsx" name="format" value="tsx">
                        <label for="format-tsx">TSX (React TypeScript)</label>

                        <input type="radio" id="format-php" name="format" value="php">
                        <label for="format-php">PHP (Beta)</label>
                    </div>
                </div>

                <div class="option-group">
                    <h3>Theme</h3>
                    <div class="radio-group">
                        <input type="radio" id="theme-light" name="theme" value="light" checked>
                        <label for="theme-light">Light</label>

                        <input type="radio" id="theme-dark" name="theme" value="dark">
                        <label for="theme-dark">Dark</label>

                        <input type="radio" id="theme-auto" name="theme" value="auto">
                        <label for="theme-auto">Auto (System Preference)</label>

                        <input type="radio" id="theme-custom" name="theme" value="custom">
                        <label for="theme-custom">Custom</label>
                    </div>
                    <div id="custom-colors" class="hidden">
                        <div class="color-picker">
                            <label for="bg-color">Background:</label>
                            <input type="color" id="bg-color" value="#f5f5f5">
                        </div>
                        <div class="color-picker">
                            <label for="text-color">Text:</label>
                            <input type="color" id="text-color" value="#333333">
                        </div>
                        <div class="color-picker">
                            <label for="border-color">Border:</label>
                            <input type="color" id="border-color" value="#dddddd">
                        </div>
                        <div class="radio-group" style="margin-top: 10px;">
                            <h4 style="font-size: 0.9rem; margin-bottom: 5px;">Icon Theme:</h4>
                            <input type="radio" id="icon-theme-light" name="icon-theme" value="light" checked>
                            <label for="icon-theme-light">Light Icon</label>

                            <input type="radio" id="icon-theme-dark" name="icon-theme" value="dark">
                            <label for="icon-theme-dark">Dark Icon</label>
                        </div>
                    </div>
                </div>

                <div class="option-group">
                    <h3>Arrow Style</h3>
                    <div class="radio-group">
                        <input type="radio" id="arrow-simple" name="arrow-style" value="simple" checked>
                        <label for="arrow-simple">Simple (←→)</label>

                        <input type="radio" id="arrow-double" name="arrow-style" value="double">
                        <label for="arrow-double">Double (⟸⟹)</label>

                        <input type="radio" id="arrow-triangle" name="arrow-style" value="triangle">
                        <label for="arrow-triangle">Triangle (◀▶)</label>

                        <input type="radio" id="arrow-chevron" name="arrow-style" value="chevron">
                        <label for="arrow-chevron">Chevron (《》)</label>

                        <input type="radio" id="arrow-angle" name="arrow-style" value="angle">
                        <label for="arrow-angle">Angle (⟨⟩)</label>

                        <input type="radio" id="arrow-custom" name="arrow-style" value="custom">
                        <label for="arrow-custom">Custom</label>
                    </div>
                    <div id="custom-arrows" class="hidden">
                        <div class="custom-arrow-input">
                            <label for="prev-arrow">Previous:</label>
                            <input type="text" id="prev-arrow" value="←" maxlength="2">
                        </div>
                        <div class="custom-arrow-input">
                            <label for="next-arrow">Next:</label>
                            <input type="text" id="next-arrow" value="→" maxlength="2">
                        </div>
                    </div>
                </div>

                <div class="option-group">
                    <h3>Visual Effects</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="spinning-icon">
                        <label for="spinning-icon">Spinning Icon on Hover</label>

                        <input type="checkbox" id="glowing-effect">
                        <label for="glowing-effect">Glowing Effect</label>

                        <input type="checkbox" id="text-wrap">
                        <label for="text-wrap">Text Wrapping (Vertical Layout)</label>

                        <input type="checkbox" id="hover-scale">
                        <label for="hover-scale">Scale on Hover</label>

                        <input type="checkbox" id="rounded">
                        <label for="rounded">Rounded Style</label>
                    </div>
                </div>

                <div class="option-group">
                    <h3>Badge Options</h3>
                    <div class="checkbox-group">
                        <input type="checkbox" id="show-badge">
                        <label for="show-badge">Show Badge (88×31px)</label>
                    </div>
                    <div id="badge-options" class="hidden">
                        <div class="radio-group">
                            <input type="radio" id="badge-default" name="badge-type" value="default" checked>
                            <label for="badge-default">Default Badge</label>

                            <input type="radio" id="badge-custom" name="badge-type" value="custom">
                            <label for="badge-custom">Custom Badge URL</label>
                        </div>
                        <div id="custom-badge-url" class="hidden">
                            <input type="text" id="badge-url" placeholder="https://your-website.com/badge.png">
                        </div>
                    </div>
                </div>

                <div class="option-group">
                    <h3>Your Website URL</h3>
                    <input type="text" id="website-url" placeholder="https://your-website.com" value="https://your-website.com">
                    <p class="help-text">Replace with your actual website URL</p>
                </div>

                <div class="option-group">
                    <h3>Element Name</h3>
                    <input type="text" id="element-name" placeholder="Enter element name" value="default">
                    <p class="help-text">Used for CSS class naming: webring-skuleayan-[name]</p>
                </div>

                <button id="generate-btn" class="action-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3v18"></path>
                        <path d="M17 8l-5-5-5 5"></path>
                    </svg>
                    Generate Code
                </button>
            </section>

            <section class="preview-panel">
                <h2>Preview</h2>
                <div class="preview-container" id="preview-container">
                    <!-- Preview will be rendered here -->
                </div>
                <div class="preview-controls">
                    <button id="toggle-preview-theme" class="secondary-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <path d="M12 1v2"></path>
                            <path d="M12 21v2"></path>
                            <path d="M4.22 4.22l1.42 1.42"></path>
                            <path d="M18.36 18.36l1.42 1.42"></path>
                            <path d="M1 12h2"></path>
                            <path d="M21 12h2"></path>
                            <path d="M4.22 19.78l1.42-1.42"></path>
                            <path d="M18.36 5.64l1.42-1.42"></path>
                        </svg>
                        Toggle Preview Theme
                    </button>
                </div>
            </section>

            <section class="code-panel">
                <h2>Generated Code</h2>
                <div class="tabs">
                    <button class="tab-btn active" data-tab="html-code">HTML</button>
                    <button class="tab-btn" data-tab="css-code">CSS</button>
                    <button class="tab-btn" data-tab="combined-code">Combined</button>
                    <button class="tab-btn" data-tab="badge-code">Badge Code</button>
                    <button class="tab-btn" data-tab="php-code">PHP</button>
                </div>
                <div class="tab-content active" id="html-code">
                    <textarea id="html-editor" class="code-editor" spellcheck="false"></textarea>
                    <button class="copy-btn" data-target="html-editor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="tab-content" id="css-code">
                    <textarea id="css-editor" class="code-editor" spellcheck="false"></textarea>
                    <button class="copy-btn" data-target="css-editor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="tab-content" id="combined-code">
                    <textarea id="combined-editor" class="code-editor" spellcheck="false"></textarea>
                    <button class="copy-btn" data-target="combined-editor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="tab-content" id="badge-code">
                    <textarea id="badge-editor" class="code-editor" spellcheck="false"></textarea>
                    <button class="copy-btn" data-target="badge-editor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy
                    </button>
                </div>
                <div class="tab-content" id="php-code">
                    <textarea id="php-editor" class="code-editor" spellcheck="false"></textarea>
                    <button class="copy-btn" data-target="php-editor">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy
                    </button>
                </div>
                <button id="update-preview-btn" class="action-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 2v6h-6"></path>
                        <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                        <path d="M3 22v-6h6"></path>
                        <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                    </svg>
                    Update Preview
                </button>
                <button id="download-btn" class="secondary-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                    Download Files
                </button>
            </section>
        </div>

        <section class="joining-info">
            <h2>Joining the SKULE Website Phone Book</h2>
            <p>After adding the webring element to your website, follow these steps to join:</p>
            <ol>
                <li>Fork the <a href="https://github.com/ayan20985/webring" target="_blank">GitHub repository</a></li>
                <li>Add your information to the <code>members</code> array in <code>js/webring-data.js</code></li>
                <li>Create a badge for your website (88×31px recommended)</li>
                <li>Submit a Pull Request</li>
            </ol>
            <p>For complete instructions, visit the <a href="https://github.com/ayan20985/webring#joining-the-webring" target="_blank">GitHub repository</a>.</p>
        </section>
    </main>

    <footer>
        <p>Tool created by <a href="https://hayson.me" target="_blank">Hayson Cheung 2T8</a> for the SKULE Website Phone Book.</p>
    </footer>

    <!-- Toast notification -->
    <div id="toast" class="toast">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <span id="toast-message">Copied to clipboard!</span>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const themeToggleBtn = document.getElementById('theme-toggle-btn');
    const bgToggleBtn = document.getElementById('bg-toggle-btn');

    // Check for saved theme preference or prefer-color-scheme
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    // Check for saved background preference, default to off
    const savedBgState = localStorage.getItem('bgEnabled');
    const bgEnabled = savedBgState ? savedBgState === 'true' : false; // Default to off

    // Function to update icon based on theme
    function updateIcon(theme) {
        // Add timestamp to prevent caching
        const timestamp = new Date().getTime();

        // Set the appropriate icon based on theme
        const iconPath = theme === 'dark' ? 'img/icon-dark.svg' : 'img/icon.svg';

        // Update the example widget in the page
        const widgetIconImg = document.getElementById('widget-demo-icon');
        if (widgetIconImg) {
            widgetIconImg.src = `${iconPath}?t=${timestamp}`;
        }

        // Update the homepage navigation widget
        const homepageWidgetIcon = document.getElementById('homepage-widget-icon');
        if (homepageWidgetIcon) {
            homepageWidgetIcon.src = `${iconPath}?t=${timestamp}`;
            console.log(`Theme changed to ${theme}, icons updated to: ${iconPath}`);
        }

        // Update all default badges
        const defaultBadgePath = theme === 'dark' ? 'badges/default-badge-dark.png' : 'badges/default-badge.png';
        const defaultBadges = document.querySelectorAll('.member-badge[src^="badges/default-badge"]');
        defaultBadges.forEach(badge => {
            badge.src = `${defaultBadgePath}?t=${timestamp}`;
        });

        // Update pixel art background colors based on theme
        if (window.pixelArtParams) {
            if (theme === 'dark') {
                window.pixelArtParams.waveColor = [0.35, 0.35, 0.35]; // Brighter gray for dark theme
            } else {
                window.pixelArtParams.waveColor = [0.85, 0.85, 0.85]; // Softer gray for light theme
            }
        }
    }

    // Function to update background visibility
    function updateBackgroundVisibility(enabled) {
        const canvas = document.getElementById('background-canvas');
        if (canvas) {
            canvas.style.display = enabled ? 'block' : 'none';

            // Initialize the background if it's being enabled and hasn't been initialized
            if (enabled && (!gl || !program)) {
                initPixelArtBackground();
            }
        }

        // Update button appearance
        if (bgToggleBtn) {
            bgToggleBtn.className = enabled ? 'bg-toggle-on' : 'bg-toggle-off';
        }

        // Save preference
        localStorage.setItem('bgEnabled', enabled);
    }

    // Apply theme based on saved preference or system preference
    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
        document.body.setAttribute('data-theme', 'dark');
        updateIcon('dark');
    } else {
        updateIcon('light');
    }

    // Apply background state based on saved preference
    updateBackgroundVisibility(bgEnabled);

    // Toggle theme on button click
    themeToggleBtn.addEventListener('click', () => {
        const currentTheme = document.body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        document.body.setAttribute('data-theme', currentTheme);
        localStorage.setItem('theme', currentTheme);
        updateIcon(currentTheme);
    });

    // Toggle background on button click
    bgToggleBtn.addEventListener('click', () => {
        const isEnabled = bgToggleBtn.className === 'bg-toggle-on';
        updateBackgroundVisibility(!isEnabled);
    });

    // Preload badge images to ensure they're in the browser cache
    function preloadBadgeImages() {
        // Preload both light and dark default badges
        const defaultBadges = ['badges/default-badge.png', 'badges/default-badge-dark.png'];

        // Preload all member badges
        const memberBadges = members.map(member => member.badge).filter(badge => badge);

        // Combine both arrays and remove duplicates
        const allBadges = [...new Set([...defaultBadges, ...memberBadges])];

        // Create image objects to preload
        allBadges.forEach(badgeSrc => {
            const img = new Image();
            img.src = badgeSrc;
        });
    }

    // Preload badges on page load
    preloadBadgeImages();

    // Handle report broken link button
    const reportLinkBtn = document.getElementById('report-link');
    if (reportLinkBtn) {
        reportLinkBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const issueUrl = "https://github.com/ayan20985/webring/issues/new";
            const issueTitle = encodeURIComponent("Broken Link Report");
            const issueBody = encodeURIComponent("## Broken Link Report\n\nPlease fill out the information below:\n\n* **Website URL**: [Enter the broken link here]\n* **Member Name**: [Enter member name if known]\n* **Issue Description**: [Describe the issue (e.g., site not loading, domain expired)]\n\nThank you for helping maintain the webring!");
            window.open(`${issueUrl}?title=${issueTitle}&body=${issueBody}`, '_blank');
        });
    }

    // Initialize the pixel art background if enabled
    if (bgEnabled) {
        initPixelArtBackground();
    }

    // Initialize the webring
    initWebring();
});
    </script>
    <script src="../js/script.js"></script>

    <script src="../js/webring-data.js"></script>

    <script src="../js/webring-tool.js"></script>
</body>
</html>
